<!DOCTYPE html>
<html lang="zh-CN" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOYU | EVENT HORIZON</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2245%22 fill=%22%23050505%22 stroke=%22white%22 stroke-width=%222%22/><circle cx=%2250%22 cy=%2250%22 r=%2215%22 fill=%22%2300f3ff%22 filter=%22blur(2px)%22/></svg>">

    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Rajdhani:wght@500;700&family=Space+Grotesk:wght@300;500&family=Inter:wght@300;900&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        bg: '#050505',
                        'accent': '#EAEAEA',
                        'dim': '#888888',
                        'tech-red': '#FF3B30',
                        'accent-blue': '#00f3ff',
                    },
                    fontFamily: {
                        serif: ['"Cinzel"', 'serif'],
                        ui: ['"Rajdhani"', 'sans-serif'],
                        mono: ['"Space Grotesk"', 'monospace'],
                        sans: ['"Inter"', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #050505;
            color: #EAEAEA;
            cursor: none;
            margin: 0;
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 0;
        }

        /* 1. å…‰æ ‡ */
        #cursor-dot {
            position: fixed;
            width: 6px;
            height: 6px;
            background: #fff;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
        }

        #cursor-circle {
            position: fixed;
            width: 50px;
            height: 50px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
            transition: transform 0.1s;
        }

        /* 2. èƒŒæ™¯å±‚ */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
        }

        #noise-layer {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            opacity: 0.06;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E");
        }

        .grid-lines {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 1;
            opacity: 0.15;
        }

        .line-v {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        .line-h {
            position: absolute;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        /* 3. å·¨å‹æ ‡é¢˜ */
        /* 3. å·¨å‹æ ‡é¢˜ (ä¿®å¤ç‰ˆï¼šé»˜è®¤éšè—) */
        .mega-title {
            font-size: 15vw;
            line-height: 0.8;
            font-weight: 900;
            font-family: 'Cinzel', serif;
            color: transparent;
            -webkit-text-stroke: 1px rgba(255, 255, 255, 0.9);
            letter-spacing: -0.02em;
            transition: color 0.5s;
            animation: breathe-glow 5s infinite alternate;

            /* ğŸ‘‡ æ–°å¢ï¼šé»˜è®¤éšèº«ï¼Œå¹¶åœ¨ä¸‹æ–¹ 50px å¤„å¾…å‘½ ğŸ‘‡ */
            opacity: 0;
            transform: translateY(50px);
        }

        .mega-subtitle {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.5vw;
            letter-spacing: 1em;
            text-transform: uppercase;
            color: #888;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 1rem;
            display: inline-block;

            /* ğŸ‘‡ æ–°å¢ï¼šé»˜è®¤éšèº«ï¼Œå¹¶åœ¨ä¸‹æ–¹ 30px å¤„å¾…å‘½ ğŸ‘‡ */
            opacity: 0;
            transform: translateY(30px);
        }

        @keyframes breathe-glow {
            0% {
                filter: drop-shadow(0 0 0px rgba(255, 255, 255, 0));
            }

            100% {
                filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.3));
            }
        }

        /* 4. å†…å®¹æ’ç‰ˆ */
        .content-section {
            min-height: 100vh;
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            padding: 6rem 0;
            background: transparent;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-card {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem;
            transition: all 0.3s;
        }

        .glass-card:hover {
            border-color: rgba(255, 255, 255, 0.4);
        }

        .data-pill {
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 6px 16px;
            font-family: 'Space Grotesk';
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #ccc;
            background: rgba(0, 0, 0, 0.5);
        }

        .project-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            padding: 2.5rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            cursor: pointer;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
        }

        .project-item:hover {
            padding-left: 20px;
            border-color: #fff;
        }

        .project-title {
            font-family: 'Cinzel';
            font-size: 2rem;
            color: #888;
            transition: color 0.3s;
        }

        .project-item:hover .project-title {
            color: #fff;
        }

        .btn-astral {
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 12px 32px;
            font-family: 'Space Grotesk';
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-size: 12px;
            transition: all 0.3s;
            background: rgba(0, 0, 0, 0.5);
        }

        .btn-astral:hover {
            background: #fff;
            color: #000;
        }

        .blog-card {
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(5px);
            transition: all 0.3s;
            cursor: pointer;
            height: 20rem;
            flex-direction: column;
            display: flex;
            justify-content: space-between;
        }

        .blog-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .reveal-mask {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #020202;
            z-index: 20;
        }

        #preloader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 99999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loader-text {
            font-family: 'Space Grotesk';
            color: #FF3B30;
            letter-spacing: 0.2em;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .loader-bar {
            width: 200px;
            height: 1px;
            background: #333;
            position: relative;
            overflow: hidden;
        }

        .loader-progress {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0%;
            background: #fff;
        }

        /* === è¯­è¨€åˆ‡æ¢å™¨æ ·å¼ === */
        .lang-switch-container {
            cursor: pointer;
            position: relative;
            width: 64px;
            height: 24px;
        }

        .lang-track {
            position: relative;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            /* ç¡¬æœ—çš„åœ†è§’ */
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 8px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            transition: border-color 0.3s;
        }

        .lang-switch-container:hover .lang-track {
            border-color: #fff;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
        }

        .lang-text {
            font-family: 'Space Grotesk', monospace;
            font-size: 10px;
            font-weight: bold;
            color: #666;
            z-index: 10;
            transition: color 0.3s;
            pointer-events: none;
            /* è®©ç‚¹å‡»ç©¿é€ */
        }

        /* æ¿€æ´»çŠ¶æ€çš„æ–‡å­—é¢œè‰² */
        .lang-active-text {
            color: #000 !important;
            /* å‘å…‰å—é‡Œçš„å­—å˜é»‘ */
            text-shadow: none;
        }

        /* æ»‘åŠ¨å— */
        .lang-glider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 30px;
            height: 18px;
            background: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            /* å¼¹æ€§åŠ¨ç”» */
            z-index: 5;
            mix-blend-mode: screen;
            /* ç§‘æŠ€æ„Ÿæ··åˆæ¨¡å¼ */
        }

        /* çŠ¶æ€ï¼šä¸­æ–‡æ—¶æ»‘å—ä½ç½® */
        .lang-zh-mode .lang-glider {
            transform: translateX(28px);
            /* å‘å³æ»‘åŠ¨ */
            background: #00f3ff;
            /* ä¸­æ–‡æ¨¡å¼å˜è“å…‰ */
            box-shadow: 0 0 15px #00f3ff;
        }

        /* === éŸ³ä¹æ³¢å½¢åŠ¨ç”» === */
        .wave-bar {
            transition: all 0.2s ease;
        }

        /* æ’­æ”¾çŠ¶æ€ï¼šæ¡æ¡å¼€å§‹è·³åŠ¨ */
        .playing .wave-bar {
            animation: sound-wave 0.8s infinite ease-in-out alternate;
            background-color: #00f3ff !important;
            /* æ’­æ”¾æ—¶å˜è“ */
        }

        /* é”™å¼€åŠ¨ç”»æ—¶é—´ï¼Œå½¢æˆæ³¢æµªæ„Ÿ */
        .playing .wave-bar:nth-child(1) {
            animation-delay: 0.0s;
        }

        .playing .wave-bar:nth-child(2) {
            animation-delay: 0.1s;
        }

        .playing .wave-bar:nth-child(3) {
            animation-delay: 0.2s;
        }

        .playing .wave-bar:nth-child(4) {
            animation-delay: 0.3s;
        }

        @keyframes sound-wave {
            0% {
                height: 2px;
            }

            100% {
                height: 12px;
            }
        }
    </style>
</head>

<body>

    <div id="preloader">
        <div class="loader-text">INITIALIZING... <span id="loading-percent">0</span>%</div>
        <div class="loader-bar">
            <div class="loader-progress"></div>
        </div>
    </div>

    <div id="cursor-dot"></div>
    <div id="cursor-circle"></div>
    <div id="noise-layer"></div>

    <div class="grid-lines">
        <div class="line-v" style="left: 10%;"></div>
        <div class="line-v" style="right: 10%;"></div>
        <div class="line-h" style="top: 10%;"></div>
        <div class="line-h" style="bottom: 10%;"></div>
    </div>

    <div id="canvas-container"></div>

    <nav
        class="fixed top-0 w-full p-8 md:px-12 z-50 flex justify-between items-center mix-blend-difference pointer-events-none">
        <div class="pointer-events-auto flex items-center gap-6">

            <a href="#" class="group relative flex items-center justify-center w-10 h-10" aria-label="Home">
                <div
                    class="absolute inset-0 rounded-full border border-white/30 group-hover:border-accent-blue group-hover:rotate-180 transition-all duration-700">
                </div>
                <div
                    class="w-3 h-3 bg-white rounded-full shadow-[0_0_15px_rgba(255,255,255,0.8)] group-hover:bg-accent-blue group-hover:shadow-[0_0_20px_#00f3ff] transition-all">
                </div>
            </a>

            <div class="h-4 w-[1px] bg-white/20"></div>

            <div class="relative group z-50 font-mono" id="audio-console">

                <div class="relative">
                    <button id="music-trigger"
                        class="flex items-center gap-3 py-3 opacity-80 hover:opacity-100 transition-opacity cursor-pointer"
                        onclick="toggleMainPlayback()">
                        <div class="flex items-end gap-[2px] h-3" id="master-wave">
                            <div class="wave-bar w-[2px] h-1 bg-white"></div>
                            <div class="wave-bar w-[2px] h-2 bg-white"></div>
                            <div class="wave-bar w-[2px] h-1.5 bg-white"></div>
                            <div class="wave-bar w-[2px] h-3 bg-white"></div>
                        </div>

                        <div class="flex flex-col leading-none text-left">
                            <span class="text-[10px] tracking-widest text-white truncate max-w-[150px]"
                                id="current-track-name">AUDIO OFF</span>
                            <span id="time-display" class="text-[8px] text-dim mt-1 hidden">0:00 / 0:00</span>
                        </div>
                    </button>

                    <div id="progress-container"
                        class="absolute bottom-0 left-0 w-full h-[2px] bg-white/20 cursor-pointer hidden hover:h-[4px] transition-all z-50">
                        <div id="progress-bar" class="h-full bg-accent-blue w-0 relative">
                            <div
                                class="absolute right-0 top-1/2 -translate-y-1/2 w-2 h-2 bg-white rounded-full shadow-[0_0_10px_#00f3ff] opacity-0 group-hover:opacity-100">
                            </div>
                        </div>
                    </div>
                </div>

                <div
                    class="absolute top-full left-0 w-64 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform group-hover:translate-y-0 translate-y-2 pointer-events-none group-hover:pointer-events-auto">
                    <div class="bg-black/95 backdrop-blur-xl border border-white/20 p-2 flex flex-col gap-1 shadow-2xl">
                        <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-accent-blue"></div>
                        <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-accent-blue"></div>

                        <div id="playlist-container">
                        </div>
                    </div>
                </div>
            </div>
            <audio id="global-audio"></audio>
        </div>

        <div
            class="hidden md:flex gap-10 font-mono text-xs tracking-widest pointer-events-auto items-center text-gray-400">
            <a href="#about" class="hover:text-white transition-colors" data-i18n="nav.about">ABOUT</a>
            <a href="#projects" class="hover:text-white transition-colors" data-i18n="nav.projects">PROJECTS</a>
            <a href="blog/blog.html" class="hover:text-white transition-colors" data-i18n="nav.blog">BLOG</a>

            <div class="relative group">
                <button class="hover:text-white transition-colors flex items-center gap-1 py-4">
                    <span data-i18n="nav.system">SYSTEM</span> <i class="ri-arrow-down-s-line"></i>
                </button>
                <div
                    class="absolute top-full right-0 w-48 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform group-hover:translate-y-0 translate-y-2">
                    <div class="bg-black/80 backdrop-blur-xl border border-white/20 p-4 flex flex-col gap-4 text-dim">
                        <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-accent-blue"></div>
                        <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-accent-blue"></div>
                        <a href="blog/photos.html"
                            class="hover:text-white hover:pl-2 transition-all block border-b border-white/10 pb-2"
                            data-i18n="nav.sys.visuals">// VISUAL LOGS</a>
                        <a href="https://github.com/Booyuu" target="_blank"
                            class="hover:text-white hover:pl-2 transition-all block border-b border-white/10 pb-2"
                            data-i18n="nav.sys.repo">// REPOSITORY</a>
                        <a href="media/media.html" class="hover:text-white hover:pl-2 transition-all block"
                            data-i18n="nav.sys.media">
                            // NEURAL INPUTS
                        </a>
                    </div>
                </div>
            </div>

            <div class="h-4 w-[1px] bg-white/20 mx-2"></div>

            <a href="#nexus" class="border border-white/30 px-5 py-2 hover:bg-white hover:text-black transition-all"
                data-i18n="nav.join">JOIN CREW</a>

            <button id="openWalletModalBtn"
                class="ml-4 border border-accent-blue/30 px-4 py-2 text-accent-blue hover:bg-accent-blue hover:text-black transition-all font-mono text-xs tracking-widest flex items-center gap-2 group relative overflow-hidden">
                <div
                    class="absolute inset-0 bg-accent-blue/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300">
                </div>
                <i class="ri-wallet-3-line relative z-10"></i>
                <span id="navWalletText" class="relative z-10">CONNECT WALLET</span>
            </button>

            <div class="lang-switch-container pointer-events-auto ml-8" onclick="toggleLanguage()">
                <div class="lang-track">
                    <span class="lang-text left">EN</span>
                    <span class="lang-text right">CN</span>
                    <div id="lang-glider" class="lang-glider"></div>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section class="h-screen w-full flex flex-col justify-center items-center relative z-10 pointer-events-none"
            id="hero">
            <div class="text-center space-y-2">
                <div class="data-pill text-white border-white/40 animate-pulse mb-8 pointer-events-auto"
                    data-i18n="hero.status">
                    <span class="w-1.5 h-1.5 bg-white rounded-full mr-2"></span>
                    SYSTEM ACTIVE
                </div>

                <h1 class="mega-title pointer-events-auto">BOYU</h1>

                <div class="mega-subtitle" data-i18n="hero.subtitle">EVENT HORIZON</div>
            </div>
        </section>

        <section class="content-section" id="about">
            <div class="max-w-6xl mx-auto w-full px-8 grid md:grid-cols-2 gap-24 items-center">
                <div class="space-y-12" data-aos>
                    <div class="data-pill">IDENTITY CORE</div>
                    <h2 class="font-serif text-5xl md:text-7xl leading-none text-white mix-blend-overlay">
                        THE<br>ARCHITECT</h2>
                    <div class="glass-card">
                        <p class="font-sans text-gray-300 text-lg leading-relaxed mb-6" data-i18n="about.intro">
                            æˆ‘æ˜¯ BOYUã€‚ä¸€å<strong>äº¤æ˜“å‘˜</strong>ä¸<strong>ä¸–ç•Œæ¢ç´¢è€…</strong>ã€‚
                        </p>

                        <p class="font-sans text-gray-400 text-sm leading-relaxed" data-i18n="about.desc">
                            è‡´åŠ›äºæ„å»ºä¸€ä¸ªå¯ä¿¡çš„æ•°å­—ä¸–ç•Œ (Ethicraft) å’Œä¸€ä¸ªæ›´å¯é çš„è‡ªå·±ã€‚<br><br>
                            åœ¨ K çº¿çš„æ¶¨è·Œä¹‹å¤–ï¼Œæˆ‘æ²‰æµ¸äº<strong>æŒªå¨</strong>çš„å³¡æ¹¾ã€Ã“lafur Arnalds
                            çš„éŸ³ä¹ï¼Œä»¥åŠå¹¸ç¦çš„äºŒäººä¸–ç•Œã€‚è¿™ä¸ªç«™ç‚¹ä¸æ˜¯ä»£ç ä»“åº“ï¼Œè€Œæ˜¯è®°å½•è´¢å¯Œé€»è¾‘ä¸ç”Ÿæ´»ç¾å­¦çš„èˆªæµ·æ—¥å¿—ã€‚<br><br>
                            è®°å½•æ‰€æœ‰æ€è€ƒã€å¤±è´¥ã€é¡¿æ‚Ÿå’Œæˆé•¿ï¼Œå­¦ä¹ å¦‚ä½•åœ¨æ··æ²Œé‡Œæ‰¾åˆ°æ–¹å‘ã€‚
                        </p>

                        <div
                            class="mt-8 pt-6 border-t border-white/10 flex items-center gap-3 text-sm font-mono flex-wrap">
                            <span class="text-dim tracking-widest text-[10px] uppercase shrink-0">CURRENT ROLE ::</span>
                            <span class="text-gray-400 shrink-0">Founder & CEO of</span>
                            <a href="https://ethicraft.co" target="_blank"
                                class="flex items-center gap-2 text-white hover:text-accent-blue transition-colors group bg-white/5 px-3 py-1 rounded border border-white/10 hover:border-accent-blue/50">
                                <img src="https://www.google.com/s2/favicons?domain=ethicraft.co&sz=32" alt="Logo"
                                    class="w-4 h-4 rounded-full grayscale group-hover:grayscale-0 transition-all">
                                <span class="tracking-wide">Ethicraft</span>
                                <i class="ri-arrow-right-up-line text-xs opacity-50 group-hover:opacity-100"></i>
                            </a>
                        </div>
                        <div
                            class="mt-2 flex items-center gap-2 text-[10px] text-dim font-mono tracking-wider pl-1 md:pl-[145px]">
                            <i class="ri-corner-down-right-line text-accent-blue/60"></i>
                            <span data-i18n="proj.ethicraft.desc">æ°¸ä¹…å…è´¹çš„ Web3 å­¦ä¹ ä¸è€ƒè¯•è®¤è¯å¹³å°</span>
                        </div>
                    </div>
                    <a href="#nexus" class="btn-astral inline-block pointer-events-auto" data-i18n="btn.contact">CONTACT
                        ME</a>
                </div>
            </div>
        </section>

        <section class="content-section" id="projects">
            <div class="w-full max-w-6xl mx-auto px-8">
                <div class="flex items-center justify-between mb-16 border-b border-white/20 pb-6">
                    <div class="data-pill" data-i18n="nav.projects">PROJECTS</div>
                    <span class="font-mono text-xs text-dim">SELECTED WORKS</span>
                </div>

                <div>
                    <div class="project-item group" onclick="window.location.href='project-ethicraft.html'">
                        <div>
                            <h3 class="project-title group-hover:text-accent-blue transition-colors">ETHICRAFT</h3>
                            <p class="font-mono text-xs text-dim mt-2 tracking-widest">WEB3 EDUCATION & CERTIFICATION
                            </p>
                            <p class="font-sans text-xs text-gray-500 mt-2 opacity-0 group-hover:opacity-100 transition-opacity"
                                data-i18n="proj.ethicraft.desc">æ°¸ä¹…å…è´¹çš„ Web3 å­¦ä¹ ä¸è€ƒè¯•è®¤è¯å¹³å°ã€‚</p>
                        </div>
                        <i class="ri-arrow-right-line text-2xl text-dim group-hover:text-white transition-colors"></i>
                    </div>

                    <div class="project-item group">
                        <div>
                            <h3 class="project-title group-hover:text-accent-red transition-colors">THE PA SYSTEM</h3>
                            <p class="font-mono text-xs text-dim mt-2 tracking-widest">PRICE ACTION TRADING</p>
                            <p class="font-sans text-xs text-gray-500 mt-2 opacity-0 group-hover:opacity-100 transition-opacity"
                                data-i18n="proj.pa.desc">è£¸Käº¤æ˜“ç³»ç»Ÿä¸å¿ƒæ€ç£¨ç ºç¬”è®°ã€‚</p>
                        </div>
                        <i
                            class="ri-arrow-right-up-line text-2xl text-dim group-hover:text-white transition-colors"></i>
                    </div>

                    <div class="project-item group" onclick="window.location.href='travel/travel.html'">
                        <div>
                            <h3 class="project-title group-hover:text-accent-green transition-colors">PLANETARY LOGS
                            </h3>
                            <p class="font-mono text-xs text-dim mt-2 tracking-widest">GLOBAL EXPLORATION</p>
                            <p
                                class="font-sans text-xs text-gray-500 mt-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                ç¯æ¸¸ä¸–ç•Œ</p>
                        </div>
                        <i class="ri-map-pin-2-line text-2xl text-dim group-hover:text-white transition-colors"></i>
                    </div>
                </div>
            </div>
        </section>

        <section class="content-section" id="blog">
            <div class="w-full max-w-6xl mx-auto px-8">
                <div class="flex items-center justify-between mb-24 border-b border-white/10 pb-6">
                    <div class="data-pill">TRANSMISSIONS</div>
                    <a href="blog/blog.html"
                        class="font-mono text-xs text-dim hover:text-white transition-colors tracking-widest pointer-events-auto"
                        data-i18n="blog.readall">
                        READ ALL ->
                    </a>
                </div>

                <div class="grid md:grid-cols-3 gap-8 w-full">

                    <article class="blog-card group pointer-events-auto"
                        onclick="window.location.href='blog/post-01.html'">
                        <div class="font-mono text-xs text-dim">2025.11.28</div>
                        <div>
                            <h3
                                class="font-serif text-2xl text-gray-200 group-hover:text-white transition-colors mb-4 leading-tight">
                                The Future of Algorithmic Art</h3>
                            <p class="font-sans text-xs text-gray-500 line-clamp-3">æ¢ç´¢ç”Ÿæˆå¼è‰ºæœ¯åœ¨ç°ä»£ç½‘é¡µè®¾è®¡ä¸­çš„åº”ç”¨ä¸è¾¹ç•Œ...</p>
                        </div>
                        <div
                            class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center group-hover:border-white transition-colors">
                            <i class="ri-arrow-right-up-line text-dim group-hover:text-white"></i>
                        </div>
                    </article>

                    <article class="blog-card group pointer-events-auto" onclick="window.location.href='#'">
                        <div class="font-mono text-xs text-dim">2025.10.15</div>
                        <div>
                            <h3
                                class="font-serif text-2xl text-gray-200 group-hover:text-white transition-colors mb-4 leading-tight">
                                Finding Alpha in Bear Markets</h3>
                            <p class="font-sans text-xs text-gray-500 line-clamp-3">å¦‚ä½•åœ¨ä¸‹è¡Œå‘¨æœŸä¸­ä¿æŒå†·é™å¹¶å¯»æ‰¾è·åˆ©æœºä¼š...</p>
                        </div>
                        <div
                            class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center group-hover:border-white transition-colors">
                            <i class="ri-arrow-right-up-line text-dim group-hover:text-white"></i>
                        </div>
                    </article>

                    <article class="blog-card group pointer-events-auto" onclick="window.location.href='#'">
                        <div class="font-mono text-xs text-dim">2025.09.02</div>
                        <div>
                            <h3
                                class="font-serif text-2xl text-gray-200 group-hover:text-white transition-colors mb-4 leading-tight">
                                A Solo Trip to Iceland</h3>
                            <p class="font-sans text-xs text-gray-500 line-clamp-3">å†°å²›ç¯å²›éª‘è¡Œè®°å½•ä¸æ‘„å½±é›†...</p>
                        </div>
                        <div
                            class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center group-hover:border-white transition-colors">
                            <i class="ri-arrow-right-up-line text-dim group-hover:text-white"></i>
                        </div>
                    </article>

                </div>
            </div>
        </section>

        <section class="content-section" id="photos">
            <div class="w-full max-w-7xl mx-auto px-8">
                <div class="text-center mb-16">
                    <div class="data-pill mb-6">OPTICS</div>
                    <h2 class="font-serif text-6xl text-white/90">VISUAL LOGS</h2>
                </div>

                <div
                    class="grid grid-cols-1 md:grid-cols-3 gap-4 opacity-40 hover:opacity-60 transition-opacity duration-500">
                    <div class="aspect-[4/5] bg-white/5 border border-white/10 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1476610182048-b716b8518aae?q=80&w=600"
                            class="w-full h-full object-cover grayscale">
                    </div>
                    <div class="aspect-[4/5] bg-white/5 border border-white/10 overflow-hidden mt-8 md:mt-12">
                        <img src="https://images.unsplash.com/photo-1504609773096-104ff2c73ba4?q=80&w=600"
                            class="w-full h-full object-cover grayscale">
                    </div>
                    <div class="aspect-[4/5] bg-white/5 border border-white/10 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1764083029040-a803c4924d5b?q=80&w=2376&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                            class="w-full h-full object-cover grayscale">
                    </div>
                </div>

                <div class="text-center -mt-32 relative z-10">
                    <a href="blog/photos.html"
                        class="btn-astral inline-block border-white/50 hover:border-white text-xl px-12 py-6 bg-black/80 backdrop-blur-md pointer-events-auto"
                        data-i18n="optics.enter">
                        ENTER GALLERY <i class="ri-arrow-right-line ml-2"></i>
                    </a>
                </div>
            </div>
        </section>

        <section class="py-32 px-8 relative z-20 border-t border-white/10 content-section" id="nexus">
            <div class="max-w-4xl mx-auto text-center space-y-20">

                <div class="space-y-6">
                    <h3 class="font-serif text-3xl text-white" data-i18n="nexus.title">REGISTER TO NEURAL LINK</h3>
                    <p class="font-sans text-dim max-w-md mx-auto text-sm" data-i18n="nexus.desc">
                        æ³¨å†Œæˆä¸º [BOYU] èŠ‚ç‚¹çš„è§‚å¯Ÿè€…ã€‚<br>ç¬¬ä¸€æ—¶é—´æ¥æ”¶æœ€æ–°çš„äº¤æ˜“ç­–ç•¥ä¸æ˜Ÿé™…å½±åƒã€‚
                    </p>
                    <div class="border border-white/20 p-8 bg-black/50 backdrop-blur-md max-w-md mx-auto mt-8 relative">
                        <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-accent-blue"></div>
                        <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-accent-blue"></div>
                        <form id="ajax-form" action="https://formspree.io/f/xangajoy" method="POST"
                            class="flex flex-col gap-6">

                            <input type="email" name="email" placeholder="ENTER YOUR EMAIL IDENTITY" required
                                class="bg-transparent border-b border-white/30 py-2 text-white font-mono text-sm outline-none focus:border-accent-blue transition-colors placeholder-gray-600 text-center w-full">

                            <button type="submit"
                                class="btn-astral text-center w-full hover:border-accent-blue hover:text-accent-blue pointer-events-auto">
                                ACTIVATE ACCOUNT
                            </button>

                            <p id="form-status" class="text-xs text-center font-mono hidden"></p>
                        </form>

                        <script>
                            var form = document.getElementById("ajax-form");

                            async function handleSubmit(event) {
                                event.preventDefault(); // 1. æ‹¦ä½é»˜è®¤æäº¤
                                var status = document.getElementById("form-status");
                                var data = new FormData(event.target);

                                // 2. JSå‘é€æ•°æ®
                                fetch(event.target.action, {
                                    method: form.method,
                                    body: data,
                                    headers: { 'Accept': 'application/json' }
                                }).then(response => {
                                    if (response.ok) {
                                        // 3. å¼ºåˆ¶è·³è½¬
                                        window.location.href = "email_success.html";
                                    } else {
                                        status.innerHTML = "Error sending message.";
                                        status.classList.remove("hidden");
                                        status.classList.add("text-red-500");
                                    }
                                }).catch(error => {
                                    status.innerHTML = "Network Error.";
                                    status.classList.remove("hidden");
                                    status.classList.add("text-red-500");
                                });
                            }
                            form.addEventListener("submit", handleSubmit);
                        </script>
                    </div>
                </div>

                <div class="w-full h-[1px] bg-white/10"></div>

                <div class="space-y-6">
                    <h3 class="font-serif text-xl text-gray-400" data-i18n="nexus.fuel">FUEL THE SHIP</h3>
                    <a href="https://buymeacoffee.com/booyuu" target="_blank"
                        class="btn-astral inline-block border-tech-red text-tech-red hover:bg-tech-red hover:text-white pointer-events-auto"
                        data-i18n="btn.sponsor">
                        <i class="ri-cup-line mr-2"></i> Buy me a coffee
                    </a>
                </div>

                <div class="grid md:grid-cols-3 gap-8 font-mono text-xs tracking-widest pt-12 border-t border-white/10">
                    <div class="flex flex-col gap-4 text-dim">
                        <a href="https://x.com/Booyuu888"
                            class="hover:text-white transition-colors pointer-events-auto">TWITTER / X</a>
                        <a href="https://www.linkedin.com/in/boyu-ethicraft/"
                            class="hover:text-white transition-colors pointer-events-auto">LINKEDIN</a>
                        <a href="https://t.me/Ethicraft_official"
                            class="hover:text-white transition-colors pointer-events-auto">ETHICRAFT</a>
                    </div>
                    <div><a href="mailto:boyu@ethicraft.co"
                            class="text-white hover:text-gray-400 transition-colors pointer-events-auto">BOYU@ETHICRAFT.CO</a>
                    </div>
                    <div class="text-dim">SINGAPORE / EARTH</div>
                </div>

                <div class="pt-8">
                    <h2 class="font-serif text-[12vw] leading-none text-white/10 select-none">BOYU</h2>
                    <p class="font-mono text-[10px] text-dim mt-8">Â© 2025 ALL RIGHTS RESERVED.</p>
                </div>
            </div>
        </section>

    </main>

    <div id="walletModal" class="fixed inset-0 z-[100] hidden opacity-0 transition-opacity duration-300">

        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="toggleWalletModal(false)"></div>

        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md p-1 pointer-events-none">
            <div class="bg-black/90 border border-accent-blue/30 shadow-[0_0_50px_rgba(0,243,255,0.15)] relative pointer-events-auto transform transition-all duration-300 scale-95"
                id="modalContent">

                <div class="absolute top-0 left-0 w-3 h-3 border-t-2 border-l-2 border-accent-blue"></div>
                <div class="absolute bottom-0 right-0 w-3 h-3 border-b-2 border-r-2 border-accent-blue"></div>

                <div class="flex justify-between items-center p-6 border-b border-white/10">
                    <h3 class="font-serif text-2xl text-white tracking-wider">CONNECT WALLET</h3>
                    <button onclick="toggleWalletModal(false)" class="text-dim hover:text-tech-red transition-colors">
                        <i class="ri-close-line text-2xl"></i>
                    </button>
                </div>

                <div id="walletGrid" class="p-6 grid grid-cols-2 gap-4">

                    <button onclick="connectWallet('okx')"
                        class="group flex flex-col items-center justify-center gap-3 p-4 border border-white/10 bg-white/5 hover:bg-white/10 hover:border-accent-blue transition-all duration-300 cursor-pointer">
                        <div
                            class="w-12 h-12 rounded-xl bg-black border border-white/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <img src="https://comm.okx.com/image/202206/0cf49581-9d22-4a0b-93df-59b2d3989c90.png"
                                class="w-8 h-8 object-cover">
                        </div>
                        <div class="text-center">
                            <div class="font-mono text-sm text-white group-hover:text-accent-blue font-bold">OKX Wallet
                            </div>
                            <div class="text-[10px] text-accent-blue/80 mt-1 tracking-wider">Recommended</div>
                        </div>
                    </button>

                    <button onclick="connectWallet('metamask')"
                        class="group flex flex-col items-center justify-center gap-3 p-4 border border-white/10 bg-white/5 hover:bg-white/10 hover:border-[#E17726] transition-all duration-300 cursor-pointer">
                        <div
                            class="w-12 h-12 rounded-xl bg-white flex items-center justify-center group-hover:scale-110 transition-transform">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3ymr3UNKopfI0NmUY95Dr-0589vG-91KuAA&s"
                                class="w-8 h-8 object-contain">
                        </div>
                        <div class="text-center">
                            <div class="font-mono text-sm text-white group-hover:text-[#E17726]">MetaMask</div>
                            <div class="text-[10px] text-dim mt-1">Popular</div>
                        </div>
                    </button>

                    <button onclick="connectWallet('wc')"
                        class="group flex flex-col items-center justify-center gap-3 p-4 border border-white/10 bg-white/5 hover:bg-white/10 hover:border-[#3396FF] transition-all duration-300 cursor-pointer">
                        <div
                            class="w-12 h-12 rounded-xl bg-[#3396FF]/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="ri-qr-code-line text-2xl text-[#3396FF]"></i>
                        </div>
                        <div class="text-center">
                            <div class="font-mono text-sm text-white group-hover:text-[#3396FF]">WalletConnect</div>
                            <div class="text-[10px] text-dim mt-1">Scan QR Code</div>
                        </div>
                    </button>

                    <button onclick="connectWallet('all')"
                        class="group flex flex-col items-center justify-center gap-3 p-4 border border-white/10 bg-white/5 hover:bg-white/10 hover:border-white transition-all duration-300 cursor-pointer">
                        <div
                            class="w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="ri-apps-line text-2xl text-white"></i>
                        </div>
                        <div class="text-center">
                            <div class="font-mono text-sm text-white">All Wallets</div>
                            <div class="text-[10px] text-dim mt-1">View More</div>
                        </div>
                    </button>
                </div>

                <button id="cancelSwitchBtn" onclick="cancelSwitch()"
                    class="hidden w-full py-3 border-t border-white/10 text-dim hover:text-white transition-colors font-mono text-[10px] tracking-widest uppercase bg-black/50 cursor-pointer">
                    <i class="ri-arrow-go-back-line mr-1"></i> Cancel / Back to Account
                </button>

                <div id="connectedView" class="hidden p-6 flex flex-col items-center justify-center gap-6 text-center">

                    <div
                        class="w-16 h-16 rounded-full border border-accent-blue bg-accent-blue/10 flex items-center justify-center shadow-[0_0_20px_rgba(0,243,255,0.2)]">
                        <i class="ri-user-3-line text-2xl text-accent-blue"></i>
                    </div>

                    <div class="space-y-1">
                        <h4 class="font-serif text-lg text-white">ACCOUNT ACTIVE</h4>
                        <div
                            class="w-full bg-black border border-white/10 px-3 py-1.5 rounded font-mono text-[10px] text-gray-400 break-all select-all">
                            <span id="fullAddressDisplay">0x...</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3 w-full">
                        <button onclick="switchWallet()"
                            class="py-2 border border-white/30 text-white hover:bg-white hover:text-black transition-all font-mono text-[10px] tracking-widest uppercase">
                            <i class="ri-exchange-line mr-1"></i> Switch
                        </button>

                        <button onclick="disconnectWallet()"
                            class="py-2 border border-tech-red/50 text-tech-red hover:bg-tech-red hover:text-white transition-all font-mono text-[10px] tracking-widest uppercase">
                            <i class="ri-shut-down-line mr-1"></i> Exit
                        </button>
                    </div>

                    <p class="text-[9px] text-dim border-t border-white/10 pt-3 w-full">
                        <i class="ri-error-warning-line align-bottom mr-1"></i>
                        å®‰å…¨æç¤ºï¼šè¯·åŠ¡å¿…å»é’±åŒ…æ’ä»¶å†…æ‰‹åŠ¨æ–­å¼€è¿æ¥ã€‚
                    </p>

                </div>

                <div class="p-4 bg-white/5 border-t border-white/10 text-center">
                    <p class="font-sans text-[10px] text-dim">
                        By connecting a wallet, you agree to the <a href="#"
                            class="text-accent-blue hover:underline">Terms of Service</a>.
                    </p>
                </div>

            </div>
        </div>
    </div>

    <script src="js/lang.js"></script>
    <script src="js/audio.js"></script>

    <script>
        // === A. åŠ è½½åŠ¨ç”» (Preloader) ===
        const preloader = document.getElementById('preloader');
        const progressBar = document.querySelector('.loader-progress');
        const percentText = document.getElementById('loading-percent');

        // 5ç§’å¼ºåˆ¶è§£é”
        setTimeout(() => {
            if (preloader && preloader.style.display !== 'none') {
                gsap.to(preloader, { opacity: 0, onComplete: () => preloader.style.display = 'none' });
            }
        }, 5000);

        let progress = 0;
        const interval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress > 100) progress = 100;

            if (progressBar) progressBar.style.width = `${progress}%`;
            if (percentText) percentText.innerText = Math.floor(progress);

            if (progress === 100) {
                clearInterval(interval);
                // 1. åŠ è½½é¡µæ·¡å‡º
                gsap.to(preloader, {
                    opacity: 0,
                    duration: 1,
                    ease: "power2.inOut",
                    onComplete: () => {
                        preloader.style.display = 'none';

                        // 2. âœ… æ ¸å¿ƒä¿®å¤ï¼šå¼ºåˆ¶è®©æ ‡é¢˜æ˜¾ç¤º (ç”¨ .to æ–¹æ³•)
                        // å°†é€æ˜åº¦è®¾ä¸º 1ï¼Œä½ç½®å½’ä½ (y:0)
                        gsap.to(".mega-title", { y: 0, opacity: 1, duration: 1.5, ease: "power3.out" });
                        gsap.to(".mega-subtitle", { y: 0, opacity: 1, duration: 1.5, delay: 0.2, ease: "power3.out" });
                    }
                });
            }
        }, 30);

        gsap.registerPlugin(ScrollTrigger);

        // === B. å…‰æ ‡è·Ÿéš ===
        const cursor = document.getElementById('cursor-dot');
        const ring = document.getElementById('cursor-circle');
        window.addEventListener('mousemove', e => {
            gsap.to(cursor, { x: e.clientX - 3, y: e.clientY - 3, duration: 0 });
            gsap.to(ring, { x: e.clientX - 25, y: e.clientY - 25, duration: 0.15 });
        });
        document.querySelectorAll('a, button, .project-item, article, img, .track-item').forEach(el => {
            el.addEventListener('mouseenter', () => gsap.to(ring, { scale: 1.5, borderColor: '#fff', backgroundColor: 'rgba(255,255,255,0.1)' }));
            el.addEventListener('mouseleave', () => gsap.to(ring, { scale: 1, borderColor: 'rgba(255,255,255,0.3)', backgroundColor: 'transparent' }));
        });

        // === D. Three.js ç²’å­æ˜Ÿæµ· (è¿™é‡ŒåŠ å›æ¥äº†ï¼) ===
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000000, 0.001);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        camera.position.z = 100;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        // ç¡®ä¿å®¹å™¨å­˜åœ¨
        const canvasContainer = document.getElementById('canvas-container');
        if (canvasContainer) canvasContainer.appendChild(renderer.domElement);

        const geometry = new THREE.BufferGeometry();
        const count = 6000;
        const positions = new Float32Array(count * 3);
        for (let i = 0; i < count * 3; i += 3) {
            positions[i] = (Math.random() - 0.5) * 1500;
            positions[i + 1] = (Math.random() - 0.5) * 1500;
            positions[i + 2] = (Math.random() - 0.5) * 2000;
        }
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const material = new THREE.PointsMaterial({ size: 1.2, color: 0xffffff, transparent: true, opacity: 0.8, sizeAttenuation: true });
        const starField = new THREE.Points(geometry, material);
        scene.add(starField);

        let mouseX = 0, mouseY = 0;
        window.addEventListener('mousemove', e => {
            mouseX = (e.clientX - window.innerWidth / 2) * 0.05;
            mouseY = (e.clientY - window.innerHeight / 2) * 0.05;
        });

        function animate() {
            starField.rotation.y += 0.0002;
            starField.rotation.x += 0.0001;
            camera.position.x += (mouseX - camera.position.x) * 0.05;
            camera.position.y += (-mouseY - camera.position.y) * 0.05;

            const scrollY = window.scrollY;
            camera.position.z = 100 - (scrollY * 0.1);

            camera.lookAt(scene.position);
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        / === F. Web3 Modal & Connection Logic (æœ€ç»ˆç²¾è£…ä¿®ç‰ˆ) ===
        const modal = document.getElementById('walletModal');
        const modalContent = document.getElementById('modalContent');
        const navBtn = document.getElementById('openWalletModalBtn');
        const navWalletText = document.getElementById('navWalletText');

        // è§†å›¾å¼•ç”¨
        const walletGrid = document.getElementById('walletGrid');
        const connectedView = document.getElementById('connectedView');
        const disconnectWarningView = document.getElementById('disconnectWarningView'); // æ–°å¢
        const fullAddressDisplay = document.getElementById('fullAddressDisplay');
        const cancelSwitchBtn = document.getElementById('cancelSwitchBtn');

        // 1. å¼¹çª—æ§åˆ¶
        function toggleWalletModal(show) {
            if (show) {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modalContent.classList.remove('scale-95');
                    modalContent.classList.add('scale-100');
                }, 10);
            } else {
                modal.classList.add('opacity-0');
                modalContent.classList.remove('scale-100');
                modalContent.classList.add('scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }
        }

        navBtn.addEventListener('click', () => toggleWalletModal(true));

        // 2. è¿æ¥é€»è¾‘
        async function connectWallet(type) {
            if (window.location.protocol === 'file:') {
                alert("Error: Web3 requires a server environment.");
                return;
            }

            let provider;
            if (type === 'okx') {
                if (typeof window.okxwallet !== 'undefined') provider = window.okxwallet;
                else if (typeof window.ethereum !== 'undefined' && window.ethereum.isOkxWallet) provider = window.ethereum;
            } else if (type === 'metamask') {
                if (window.ethereum) {
                    if (window.ethereum.providers) provider = window.ethereum.providers.find(p => p.isMetaMask);
                    else if (window.ethereum.isMetaMask && !window.ethereum.isOkxWallet) provider = window.ethereum;
                    else provider = window.ethereum;
                }
            } else {
                alert("Module 'WalletConnect' is loading...");
                return;
            }

            if (!provider) {
                if (type === 'okx') window.open('[https://www.okx.com/web3](https://www.okx.com/web3)', '_blank');
                else window.open('[https://metamask.io/](https://metamask.io/)', '_blank');
                return;
            }

            try {
                navWalletText.innerText = "CONNECTING...";
                const accounts = await provider.request({ method: 'eth_requestAccounts' });
                handleAccountsChanged(accounts);
            } catch (error) {
                console.error("Connection Error:", error);
                navWalletText.innerText = "CONNECT WALLET";
            }
        }

        // 3. çŠ¶æ€ç®¡ç† (æ§åˆ¶3ä¸ªè§†å›¾çš„åˆ‡æ¢)
        function handleAccountsChanged(accounts) {
            if (accounts && accounts.length > 0) {
                // === å·²è¿æ¥ ===
                const account = accounts[0];
                navWalletText.innerText = `${account.substring(0, 4)}...${account.substring(account.length - 4)}`;
                navBtn.classList.add("border-accent-blue", "shadow-[0_0_15px_rgba(0,243,255,0.3)]");
                navBtn.style.backgroundColor = "rgba(0, 243, 255, 0.05)";

                // æ˜¾ç¤ºâ€œè¯¦æƒ…é¡µâ€ï¼Œéšè—å…¶ä»–
                if (walletGrid) walletGrid.classList.add('hidden');
                if (disconnectWarningView) disconnectWarningView.classList.add('hidden');
                if (connectedView) connectedView.classList.remove('hidden');

                if (fullAddressDisplay) fullAddressDisplay.innerText = account;
                if (cancelSwitchBtn) cancelSwitchBtn.classList.add('hidden'); // è¿æ¥æˆåŠŸä¸éœ€è¦è¿”å›æŒ‰é’®

                toggleWalletModal(false);

            } else {
                // === æœªè¿æ¥ / é‡ç½® ===
                navWalletText.innerText = "CONNECT WALLET";
                navBtn.classList.remove("border-accent-blue", "shadow-[0_0_15px_rgba(0,243,255,0.3)]");
                navBtn.style.backgroundColor = "transparent";

                // æ˜¾ç¤ºâ€œåˆ—è¡¨é¡µâ€ï¼Œéšè—å…¶ä»–
                if (walletGrid) walletGrid.classList.remove('hidden');
                if (connectedView) connectedView.classList.add('hidden');
                if (disconnectWarningView) disconnectWarningView.classList.add('hidden');

                if (cancelSwitchBtn) cancelSwitchBtn.classList.add('hidden');
            }
        }

        // 4. ç‚¹å‡»é€€å‡º (Exit) -> åˆ‡æ¢åˆ°è­¦å‘Šé¡µ
        function disconnectWallet() {
            // ä¸ç›´æ¥æ–­å¼€ï¼Œè€Œæ˜¯åˆ‡æ¢è§†å›¾
            connectedView.classList.add('hidden');
            disconnectWarningView.classList.remove('hidden');
        }

        // 5. ç¡®è®¤æ–­å¼€ (I Understand) -> çœŸæ­£æ–­å¼€
        function confirmDisconnect() {
            handleAccountsChanged([]); // æ¸…é™¤çŠ¶æ€
            toggleWalletModal(false);  // å…³é—­å¼¹çª—
        }

        // 6. åˆ‡æ¢é’±åŒ… (Switch)
        function switchWallet() {
            connectedView.classList.add('hidden');
            walletGrid.classList.remove('hidden');
            if (cancelSwitchBtn) cancelSwitchBtn.classList.remove('hidden');
        }

        // 7. å–æ¶ˆåˆ‡æ¢ (Back)
        function cancelSwitch() {
            walletGrid.classList.add('hidden');
            connectedView.classList.remove('hidden');
            if (cancelSwitchBtn) cancelSwitchBtn.classList.add('hidden');
        }

        window.addEventListener('load', () => {
            if (window.ethereum) {
                window.ethereum.request({ method: 'eth_accounts' })
                    .then(handleAccountsChanged)
                    .catch(console.error);
            }
        });
    </script>
</body>

</html>